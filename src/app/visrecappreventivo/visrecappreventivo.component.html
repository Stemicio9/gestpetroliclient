<button mat-fab class="top-left-custom btn btn-warning" aria-label="Torna indietro" (click)="tornaindietro()">
    <-----------
</button>




<div class="main-content">
    <div class="container-fluid">


        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-info text-center">
                        <h4 class="card-title">Preventivo</h4>

                    </div>




                    <div class="card-body">

                        <!-- Dati del punto vendita -->    <!-- Data di consegna -->
                        <div class="row">
                            <div class="col-md-6 text-center">
                                {{preventivoselezionato.riferimento.puntoVendita.nome}}
                                <br>
                                {{preventivoselezionato.nomecliente}}
                            </div>

                            <div class="col-md-6 text-center">
                                Data di consegna: {{preventivoselezionato.riferimento.data | date :'dd-MM-yyyy'}}
                            </div>
                        </div>

                        <br> <br>


                        <div class="row">

                            <div class="col-md-11">
                                <table style="width: 100%;">
                                    <tr>
                                        <th colspan="3">PRODOTTO</th>
                                        <th colspan="2">GASOLIO</th>
                                        <th colspan="2">BENZINA</th>
                                        <th colspan="2">SUPREME</th>
                                        <th>GPL</th>
                                    </tr>
                                    <tr>
                                        <td colspan="3">Modalit√†</td>
                                        <td>Servito</td>
                                        <td>Self</td>
                                        <td>Servito</td>
                                        <td>Self</td>
                                        <td>Servito</td>
                                        <td>Self</td>
                                        <td>Servito</td>

                                    </tr>
                                    <tr>
                                        <td colspan="3">Prezzo al pubblico</td>
                                        <td>{{preventivoselezionato.prezzoalpubblicogasolioservito}}</td>
                                        <td>{{preventivoselezionato.prezzoalpubblicogasolioself}}</td>
                                        <td>{{preventivoselezionato.prezzoalpubblicobenzinaservito}}</td>
                                        <td>{{preventivoselezionato.prezzoalpubblicobenzinaself}}</td>
                                        <td>{{preventivoselezionato.prezzoalpubblicosupremeservito}}</td>
                                        <td>{{preventivoselezionato.prezzoalpubblicosupremeself}}</td>
                                        <td>{{preventivoselezionato.prezzoalpubblicogplservito}}</td>
                                    </tr>

                                    <tr>
                                        <td colspan="3">Prezzo al pubblico Senza IVA</td>
                                        <td>{{togliiva(preventivoselezionato.prezzoalpubblicogasolioservito) | number:'1.3-3'}}</td>
                                        <td>{{togliiva(preventivoselezionato.prezzoalpubblicogasolioself) | number:'1.3-3'}}</td>
                                        <td>{{togliiva(preventivoselezionato.prezzoalpubblicobenzinaservito) | number:'1.3-3'}}</td>
                                        <td>{{togliiva(preventivoselezionato.prezzoalpubblicobenzinaself) | number:'1.3-3'}}</td>
                                        <td>{{togliiva(preventivoselezionato.prezzoalpubblicosupremeservito) | number:'1.3-3'}}</td>
                                        <td>{{togliiva(preventivoselezionato.prezzoalpubblicosupremeself) | number:'1.3-3'}}</td>
                                        <td>{{togliiva(preventivoselezionato.prezzoalpubblicogplservito) | number:'1.3-3'}}</td>
                                    </tr>

                                    <tr>
                                        <td colspan="3">Margine previsto per contratto</td>
                                        <td>{{proprietario.marginegasolioservito}}</td>
                                        <td>{{proprietario.marginegasolioself}}</td>
                                        <td>{{proprietario.marginebenzinaservito}}</td>
                                        <td>{{proprietario.marginebenzinaself}}</td>
                                        <td>{{proprietario.marginesupremeservito}}</td>
                                        <td>{{proprietario.marginesupremeself}}</td>
                                        <td>{{proprietario.marginegplservito }}</td>
                                    </tr>

                                    <tr>
                                        <td colspan="3">Margine cessione senza IVA (in %)</td>
                                        <td colspan="2">{{preventivoselezionato.marginecessionegasolio}}</td>

                                        <td colspan="2">{{preventivoselezionato.marginecessionebenzina}}</td>

                                        <td colspan="2">{{preventivoselezionato.marginecessionesupreme}}</td>

                                        <td>{{preventivoselezionato.marginecessionegpl}}</td>
                                    </tr>

                                    <tr>
                                        <td colspan="3">Prezzo in fattura</td>

                                        <td colspan="2">{{prezzoinfattura(preventivoselezionato.prezzoalpubblicogasolioself,proprietario.marginegasolioself,preventivoselezionato.marginecessionegasolio) | number:'1.3-3'}}</td>
                                        <td colspan="2">{{prezzoinfattura(preventivoselezionato.prezzoalpubblicobenzinaself,proprietario.marginebenzinaself,preventivoselezionato.marginecessionebenzina) | number:'1.3-3'}}</td>
                                        <td colspan="2">{{prezzoinfattura(preventivoselezionato.prezzoalpubblicosupremeself,proprietario.marginesupremeself,preventivoselezionato.marginecessionesupreme) | number:'1.3-3'}}</td>
                                        <td>{{prezzoinfattura(preventivoselezionato.prezzoalpubblicogplservito,proprietario.marginegplservito,preventivoselezionato.marginecessionegpl) | number:'1.3-3'}}</td>
                                    </tr>

                                    <tr>
                                        <td colspan="3">Volume ordinato</td>
                                        <td colspan="2">{{preventivoselezionato.riferimento.gasolio}}</td>
                                        <td colspan="2">{{preventivoselezionato.riferimento.benzina}}</td>
                                        <td colspan="2">{{preventivoselezionato.riferimento.supreme}}</td>
                                        <td>{{preventivoselezionato.riferimento.gpl}}</td>
                                    </tr>

                                    <tr>
                                        <td colspan="3">Totale ordine senza IVA</td>
                                        <td colspan="2">{{prezzoconvolumesenzaiva(preventivoselezionato.prezzoalpubblicogasolioself,proprietario.marginegasolioself,preventivoselezionato.marginecessionegasolio,preventivoselezionato.riferimento.gasolio) | currency:'EUR'}}</td>
                                        <td colspan="2">{{prezzoconvolumesenzaiva(preventivoselezionato.prezzoalpubblicobenzinaself,proprietario.marginebenzinaself,preventivoselezionato.marginecessionebenzina,preventivoselezionato.riferimento.benzina) | currency:'EUR'}}</td>
                                        <td colspan="2">{{prezzoconvolumesenzaiva(preventivoselezionato.prezzoalpubblicosupremeself,proprietario.marginesupremeself,preventivoselezionato.marginecessionesupreme,preventivoselezionato.riferimento.supreme) | currency:'EUR'}}</td>
                                        <td>{{prezzoconvolumesenzaiva(preventivoselezionato.prezzoalpubblicogplservito,proprietario.marginegplservito,preventivoselezionato.marginecessionegpl,preventivoselezionato.riferimento.gpl) | currency:'EUR'}}</td>
                                    </tr>

                                    <tr>
                                        <td colspan="3">Totale ordine IVA Compresa</td>
                                        <td colspan="2">{{prezzoconvolumesenzaiva(preventivoselezionato.prezzoalpubblicogasolioself,proprietario.marginegasolioself,preventivoselezionato.marginecessionegasolio,preventivoselezionato.riferimento.gasolio) * 1.22 | currency:'EUR'}}</td>
                                        <td colspan="2">{{prezzoconvolumesenzaiva(preventivoselezionato.prezzoalpubblicobenzinaself,proprietario.marginebenzinaself,preventivoselezionato.marginecessionebenzina,preventivoselezionato.riferimento.benzina) * 1.22 | currency:'EUR'}}</td>
                                        <td colspan="2">{{prezzoconvolumesenzaiva(preventivoselezionato.prezzoalpubblicosupremeself,proprietario.marginesupremeself,preventivoselezionato.marginecessionesupreme,preventivoselezionato.riferimento.supreme) * 1.22 | currency:'EUR'}}</td>
                                        <td>{{prezzoconvolumesenzaiva(preventivoselezionato.prezzoalpubblicogplservito,proprietario.marginegplservito,preventivoselezionato.marginecessionegpl,preventivoselezionato.riferimento.gpl) * 1.22 | currency:'EUR'}}</td>
                                    </tr>


                                </table>


                            </div>

                        </div>


                        <div class="row">
                            <br>
                        </div>

                        <div class="row">

                            <div class="col-md-1">
                            </div>
                            <div class="col-md-4">
                                <table class="row-border hover ">

                                    <thead>
                                    <tr>
                                        <th>Voce di rettifica</th>
                                        <th>Valore</th>


                                    </tr>
                                    </thead>



                                    <tbody>
                                    <tr *ngFor="let voce of preventivoselezionato.listavocidirettifica">
                                        <td>{{ voce.vocedirettifica }}</td>
                                        <td>{{ voce.valore }}</td>
                                    </tr>
                                    </tbody>



                                </table>


                            </div>
                            <div class="col-md-7 text-center">

                                <h4><b>TOTALE CON IVA: {{calcolatotaleconiva() | number:'1.2-2'}}</b></h4>
                                <h4><b>TOTALE VOCI DI RETTIFICA: {{calcolasommavocidirettifica() | number:'1.2-2'}}</b></h4>
                                <h4><b>IMPORTO BONIFICO: {{calcolaimportobonifico() | number:'1.2-2'}}</b></h4>

                                <br>

                                <button mat-button (click)="stampapreventivo()" mat-flat-button class="btn btn-rose" type="button">Stampa preventivo</button>

                            </div>
                        </div>










                    </div>
                </div>
            </div>
        </div>






















    </div>
</div>